{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","components/Test/Test.js","App.js","index.js"],"names":["Searchbar","state","requestValue","handleRequestChange","evt","setState","currentTarget","value","toLowerCase","handleSubmit","event","preventDefault","trim","toast","error","props","onSubmit","className","this","type","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","arrImages","givLinkForModal","console","log","hits","map","obj","id","onClick","src","webformatURL","alt","Button","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","children","ImageGallery","pageNumber","status","showModal","modalImage","onRequest","fetch","keyApi","then","response","ok","json","Promise","reject","Error","arr","catch","toggleModal","objId","find","Number","largeImageURL","prevProps","prevState","color","height","width","timeout","length","Test","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.576e06b1.chunk.js","sourcesContent":["import { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nclass Searchbar extends Component {\n  state = {\n    requestValue: \"\",\n  };\n\n  handleRequestChange = (evt) => {\n    this.setState({ requestValue: evt.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    if (this.state.requestValue.trim() === \"\") {\n      return toast.error(\"измените запрос\", {});\n    }\n    this.setState({ requestValue: \"\" });\n    this.props.onSubmit(this.state.requestValue);\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            name=\"requestValue\"\n            value={this.state.requestValue}\n            onChange={this.handleRequestChange}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","function ImageGalleryItem({ arrImages, givLinkForModal }) {\n  console.log(arrImages)\n  return arrImages.hits.map((obj) => {\n    return (\n      <li\n        className=\"ImageGalleryItem\"\n        key={obj.id}\n        id={obj.id}\n        onClick={givLinkForModal}\n      >\n        <img\n          className=\"ImageGalleryItem-image\"\n          src={obj.webformatURL}\n          alt=\"\"\n          // {obj.largeImageURL}\n        />\n      </li>\n    )\n  })\n}\n\nexport default ImageGalleryItem\n","function Button() {\n  return <button type=\"button\">Load more</button>\n}\n\nexport default Button\n\n// // Для скрола используй следующий код:\n\n// window.scrollTo({\n//   top: document.documentElement.scrollHeight,\n//   behavior: 'smooth',\n// });\n","import { Component } from 'react'\nimport { createPortal } from 'react-dom'\n// import s from './Modal.module.css'\n\nconst modalRoot = document.querySelector('#modal-root')\nconsole.log(modalRoot)\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown)\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === 'Escape') {\n      this.props.onClose()\n    }\n  }\n\n  handleBackdropClick = (evt) => {\n    if (evt.currentTarget === evt.target) {\n      this.props.onClose()\n    }\n  }\n\n  render() {\n    return createPortal(\n      // <div className={s.Modal__backdrop} onClick={this.handleBackdropClick}>\n      //   <div className={s.Modal__content}>{this.props.children}</div>\n      // </div>,\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot,\n    )\n  }\n}\n\nexport default Modal\n","import { Component } from 'react'\nimport Loader from 'react-loader-spinner'\nimport ImageGalleryItem from '../ImageGalleryItem'\nimport Button from '../Button'\nimport Modal from '../Modal'\n\nclass ImageGallery extends Component {\n  state = {\n    pageNumber: 1,\n    arrImages: null,\n    error: null,\n    status: 'idle',\n    showModal: false,\n    modalImage: '',\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log(prevProps)\n    // console.log(prevState)\n    // console.log(this.state)\n\n    if (prevProps.requestValue !== this.props.requestValue) {\n      this.setState({\n        status: 'pending',\n        // arrImages: null\n      })\n      this.onRequest()\n      //   fetch(\n      //     `https://pixabay.com/api/?q=${this.props.requestValue}&page=${this.state.pageNumber}&key=${this.props.keyApi}&image_type=photo&orientation=horizontal&per_page=4`,\n      //   )\n      //     .then((response) => {\n      //       if (response.ok) {\n      //         return response.json()\n      //       }\n\n      //       return Promise.reject(\n      //         new Error(`ошибка по запросу ${this.props.requestValue}`),\n      //       )\n      //     })\n      //     .then((arr) => this.setState({ arrImages: arr, status: 'resolved' }))\n      //     .catch((error) => this.setState({ error: error, status: 'rejected' }))\n    }\n  }\n  onRequest = () => {\n    fetch(\n      `https://pixabay.com/api/?q=${this.props.requestValue}&page=${this.state.pageNumber}&key=${this.props.keyApi}&image_type=photo&orientation=horizontal&per_page=4`,\n    )\n      .then((response) => {\n        if (response.ok) {\n          return response.json()\n        }\n\n        return Promise.reject(\n          new Error(`ошибка по запросу ${this.props.requestValue}`),\n        )\n      })\n      .then((arr) =>\n        this.setState({\n          arrImages: arr,\n          status: 'resolved',\n        }),\n      )\n      .catch((error) => this.setState({ error: error, status: 'rejected' }))\n  }\n\n  // onLoadMore = () => {\n  //   this.onRequest()\n  //   this.setState((prevState) => ({\n  //     pageNumber: prevState.pageNumber + 1,\n  //   }))\n  // }\n\n  toggleModal = () => {\n    this.setState((state) => ({\n      showModal: !state.showModal,\n    }))\n    // console.log(evt.target)\n    // console.log(evt.currentTarget)\n    // this.givDateForModal(evt.currentTarget)\n  }\n\n  givLinkForModal = (e) => {\n    console.log(e.currentTarget)\n\n    const objId = this.state.arrImages.hits.find(\n      (obj) => obj.id === Number(e.currentTarget.id),\n    )\n\n    this.setState({\n      modalImage: objId.largeImageURL,\n    })\n\n    this.toggleModal()\n  }\n\n  // givLinkModal = () => {}\n\n  render() {\n    // console.log(this.state.arrImages)\n    if (this.state.status === 'idle') {\n      return <div>The result of your request will be posted here</div>\n    }\n\n    if (this.state.status === 'pending') {\n      return (\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      )\n    }\n\n    if (this.state.status === 'rejected') {\n      console.log(this.state.error)\n      return <div>{this.state.error}</div>\n    }\n\n    if (this.state.arrImages.hits.length === 0) {\n      return (\n        <div>\n          There are no results for this request: \"{this.props.requestValue}\"\n          Сhange request.\n        </div>\n      )\n    }\n\n    if (this.state.status === 'resolved') {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            <ImageGalleryItem\n              arrImages={this.state.arrImages}\n              givLinkForModal={this.givLinkForModal}\n            />\n          </ul>\n          {this.state.arrImages.hits.length > 0 && <Button />}\n          {this.state.showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={this.state.modalImage} alt=\"\" />\n            </Modal>\n          )}\n        </>\n      )\n    }\n  }\n}\nexport default ImageGallery\n","import { Component } from \"react\";\n\nclass Test extends Component {\n  render() {\n    return <div>Test</div>;\n  }\n}\n\nexport default Test;\n","import { Component } from 'react'\nimport { ToastContainer } from 'react-toastify'\nimport './App.css'\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css'\nimport Searchbar from './components/Searchbar'\nimport ImageGallery from './components/ImageGallery'\n\n// модалку приспособить\n\n// компонент для тренировки\nimport Test from './components/Test/Test'\n\nconst MY_API_KEY = '23246580-47279d47050c78840bfc8f048'\n\nclass App extends Component {\n  state = {\n    requestValue: '',\n\n    // showModal: false,\n  }\n\n  // toggleModal = () => {\n  //   this.setState((state) => ({\n  //     showModal: !state.showModal,\n  //   }))\n  // }\n\n  handleFormSubmit = (requestValue) => {\n    this.setState({ requestValue })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Test />\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          requestValue={this.state.requestValue}\n          keyApi={MY_API_KEY}\n        />\n        {/* <Button /> */}\n        {/* {this.state.showModal && (\n          <Modal onClose={this.toggleModal}>\n            <h1>то что будет отображено в модалке</h1>\n            <p>\n              loremloremlorem loremloremlorem loremloremloreml oremloremlorem\n            </p>\n\n          </Modal>\n        )} */}\n        <ToastContainer autoClose={2500} />\n        {/* <button type=\"button\" onClick={this.toggleModal}>\n          Открыть модалку\n        </button> */}\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}