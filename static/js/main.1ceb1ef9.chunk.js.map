{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","requestValue","handleRequestChange","evt","setState","currentTarget","value","toLowerCase","handleSubmit","event","preventDefault","trim","toast","error","props","onSubmit","className","this","type","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","arrImages","givLinkForModal","console","log","map","obj","id","onClick","src","webformatURL","alt","Button","onLoadMore","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","children","ImageGallery","pageNumber","status","showModal","modalImage","onRequest","fetch","keyApi","then","response","ok","json","Promise","reject","Error","toggleModal","objId","find","Number","largeImageURL","prevState","prevProps","arr","hits","catch","scrollTo","top","documentElement","scrollHeight","behavior","color","height","width","timeout","length","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1ceb1ef9.chunk.js","sourcesContent":["import { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nclass Searchbar extends Component {\n  state = {\n    requestValue: \"\",\n  };\n\n  handleRequestChange = (evt) => {\n    this.setState({ requestValue: evt.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    if (this.state.requestValue.trim() === \"\") {\n      return toast.error(\"измените запрос\", {});\n    }\n    this.setState({ requestValue: \"\" });\n    this.props.onSubmit(this.state.requestValue);\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            name=\"requestValue\"\n            value={this.state.requestValue}\n            onChange={this.handleRequestChange}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","function ImageGalleryItem({ arrImages, givLinkForModal }) {\n  console.log(arrImages);\n  return arrImages.map((obj) => {\n    return (\n      <li\n        className=\"ImageGalleryItem\"\n        key={obj.id}\n        id={obj.id}\n        onClick={givLinkForModal}\n      >\n        <img className=\"ImageGalleryItem-image\" src={obj.webformatURL} alt=\"\" />\n      </li>\n    );\n  });\n}\n\nexport default ImageGalleryItem;\n","function Button({ onLoadMore }) {\n  return (\n    <button className=\"Button\" type=\"button\" onClick={onLoadMore}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n","import { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\nconsole.log(modalRoot);\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (evt) => {\n    if (evt.currentTarget === evt.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport ImageGalleryItem from \"../ImageGalleryItem\";\nimport Button from \"../Button\";\nimport Modal from \"../Modal\";\n\nclass ImageGallery extends Component {\n  state = {\n    pageNumber: 1,\n    arrImages: [],\n    error: null,\n    status: \"idle\",\n    showModal: false,\n    modalImage: \"\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    // console.log(prevProps)\n    // console.log('prevState', prevState)\n    // console.log('this.state', this.state)\n\n    if (prevProps.requestValue !== this.props.requestValue) {\n      this.setState({\n        status: \"pending\",\n        pageNumber: 1,\n      });\n      // onRequest = () => {\n\n      this.onRequest()\n        .then((arr) =>\n          // console.log(arr),\n          this.setState({\n            arrImages: arr.hits,\n            // prevState.arrImage > 0\n            //   ? [...prevState.arrImage, arr.hits]\n            //   : [...arr.hits],\n\n            status: \"resolved\",\n          })\n        )\n        .catch((error) => this.setState({ error: error, status: \"rejected\" }));\n    }\n\n    if (prevState.pageNumber !== this.state.pageNumber) {\n      this.setState({\n        status: \"pending\",\n      });\n      this.onRequest()\n        .then(\n          (arr) =>\n            this.setState({\n              arrImages: [...prevState.arrImages, ...arr.hits],\n              status: \"resolved\",\n            })\n          // this.setState({\n          //   arrImages:\n          //     this.state.arrImage !== null\n          //       ? [...this.state.arrImage, arr.hits]\n          //       : [...arr.hits],\n\n          //   status: 'resolved',\n          // }),\n        )\n        .catch((error) => this.setState({ error: error, status: \"rejected\" }));\n    }\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  onRequest = () => {\n    return fetch(\n      `https://pixabay.com/api/?q=${this.props.requestValue}&page=${this.state.pageNumber}&key=${this.props.keyApi}&image_type=photo&orientation=horizontal&per_page=12`\n    ).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(\n        new Error(`Ошибка по запросу ${this.props.requestValue}`)\n      );\n    });\n  };\n\n  toggleModal = () => {\n    this.setState((state) => ({\n      showModal: !state.showModal,\n    }));\n    // console.log(evt.target)\n    // console.log(evt.currentTarget)\n    // this.givDateForModal(evt.currentTarget)\n  };\n\n  givLinkForModal = (e) => {\n    console.log(e.currentTarget);\n\n    const objId = this.state.arrImages.find(\n      (obj) => obj.id === Number(e.currentTarget.id)\n    );\n\n    this.setState({\n      modalImage: objId.largeImageURL,\n    });\n\n    this.toggleModal();\n  };\n\n  onLoadMore = () => {\n    this.setState((prevState) => ({\n      pageNumber: prevState.pageNumber + 1,\n    }));\n    // window.scrollTo({\n    //   top: document.documentElement.scrollHeight,\n    //   behavior: 'smooth',\n    // })\n\n    console.log(\"нажатие кнопки loadMore\");\n  };\n\n  render() {\n    if (this.state.status === \"idle\") {\n      return <div>The result of your request will be posted here</div>;\n    }\n\n    if (this.state.status === \"pending\") {\n      return (\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      );\n    }\n\n    if (this.state.status === \"rejected\") {\n      return <div>{this.state.error}</div>;\n    }\n\n    if (this.state.arrImages.length === 0) {\n      return (\n        <div>\n          There are no results for this request: \"{this.props.requestValue}\"\n          Сhange request.\n        </div>\n      );\n    }\n\n    if (this.state.status === \"resolved\") {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            <ImageGalleryItem\n              arrImages={this.state.arrImages}\n              givLinkForModal={this.givLinkForModal}\n            />\n          </ul>\n          {this.state.arrImages.length > 0 && (\n            <Button onLoadMore={this.onLoadMore} />\n          )}\n          {this.state.showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={this.state.modalImage} alt=\"\" />\n            </Modal>\n          )}\n        </>\n      );\n    }\n  }\n}\nexport default ImageGallery;\n","import { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"./App.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\n\n// модалку приспособить\n\nconst MY_API_KEY = \"23246580-47279d47050c78840bfc8f048\";\n\nclass App extends Component {\n  state = {\n    requestValue: \"\",\n    // pageNumber: 1,\n  };\n\n  handleFormSubmit = (requestValue) => {\n    this.setState({ requestValue });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          requestValue={this.state.requestValue}\n          pageNumber={this.state.pageNumber}\n          keyApi={MY_API_KEY}\n        />\n        <ToastContainer autoClose={2500} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}